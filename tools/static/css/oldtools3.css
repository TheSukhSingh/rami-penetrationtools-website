* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --background: #0a0a0a;
  --foreground: #fafafa;
  --card: #111111;
  --card-foreground: #fafafa;
  --popover: #111111;
  --popover-foreground: #fafafa;
  --primary: #fafafa;
  --primary-foreground: #0a0a0a;
  --secondary: #262626;
  --secondary-foreground: #fafafa;
  --muted: #262626;
  --muted-foreground: #a1a1aa;
  --accent: #262626;
  --accent-foreground: #fafafa;
  --destructive: #dc2626;
  --destructive-foreground: #fafafa;
  --border: #262626;
  --input: #262626;
  --ring: #d4d4d8;
  --success: #16a34a;
  --warning: #f59e0b;
  --info: #3b82f6;
  --radius: 0.5rem;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
  background-color: var(--background);
  color: var(--foreground);
  height: 100vh;
  overflow: hidden;
}

.app-container {
  display: flex;
  height: 100vh;
  width: 100vw;
}

/* Tools Panel */
.tools-panel {
  width: 280px;
  background-color: var(--card);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.tools-header {
  padding: 20px;
  border-bottom: 1px solid var(--border);
}

.tools-header h2 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 8px;
}

.tools-header p {
  font-size: 14px;
  color: var(--muted-foreground);
}

.tools-list {
  padding: 20px;
  flex: 1;
}

.tool-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  margin-bottom: 8px;
  background-color: var(--secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: grab;
  transition: all 0.2s ease;
  user-select: none;
}

.tool-item:hover {
  background-color: var(--accent);
  border-color: var(--ring);
}

.tool-item:active {
  cursor: grabbing;
}

.tool-icon {
  width: 20px;
  height: 20px;
  background-color: var(--info);
  border-radius: 4px;
  margin-right: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: white;
}

.tool-name {
  font-size: 14px;
  font-weight: 500;
}

/* Canvas Panel */
.canvas-panel {
  flex: 1;
  background-color: var(--background);
  position: relative;
  overflow: hidden;
}

.canvas-header {
  height: 60px;
  background-color: var(--card);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
}

.canvas-title {
  font-size: 16px;
  font-weight: 600;
}

.canvas-controls {
  display: flex;
  gap: 12px;
}

.btn {
  padding: 8px 16px;
  border: 1px solid var(--border);
  background-color: var(--secondary);
  color: var(--foreground);
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.btn:hover {
  background-color: var(--accent);
  border-color: var(--ring);
}

.btn.primary {
  background-color: var(--primary);
  color: var(--primary-foreground);
  border-color: var(--primary);
}

.btn.primary:hover {
  opacity: 0.9;
}

.canvas-area {
  height: calc(100vh - 60px);
  position: relative;
  background-image: radial-gradient(circle, var(--border) 1px, transparent 1px);
  background-size: 20px 20px;
  overflow: auto;
}

.canvas-node {
  position: absolute;
  width: 200px;
  min-height: 80px;
  background-color: var(--card);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  cursor: move;
  user-select: none;
  transition: all 0.2s ease;
}

.canvas-node:hover {
  border-color: var(--ring);
}

.canvas-node.selected {
  border-color: var(--info);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.canvas-node.error {
  border-color: var(--destructive);
  box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2);
}

.node-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.node-title {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.node-config {
  width: 16px;
  height: 16px;
  cursor: pointer;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.node-config:hover {
  opacity: 1;
}

.node-body {
  padding: 12px 16px;
  font-size: 12px;
  color: var(--muted-foreground);
}

.connection-point {
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: var(--info);
  border: 2px solid var(--card);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
}

.connection-point.input {
  left: -6px;
  top: 50%;
  transform: translateY(-50%);
}

.connection-point.output {
  right: -6px;
  top: 50%;
  transform: translateY(-50%);
}

.connection-point:hover {
  background-color: var(--success);
  transform: translateY(-50%) scale(1.2);
}

.connection-line {
  position: absolute;
  pointer-events: none;
  z-index: 1;
}

.connection-line path {
  stroke: var(--info);
  stroke-width: 2;
  fill: none;
}

/* Output Panel */
.output-panel {
  width: 320px;
  background-color: var(--card);
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
}

.output-header {
  padding: 20px;
  border-bottom: 1px solid var(--border);
}

.output-header h2 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 8px;
}

.output-content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.output-section {
  margin-bottom: 24px;
}

.output-section h3 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
  color: var(--muted-foreground);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.output-item {
  padding: 12px;
  background-color: var(--secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 8px;
  font-size: 14px;
  font-family: "Monaco", "Menlo", monospace;
}

.status-indicator {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 8px;
}

.status-indicator.success {
  background-color: var(--success);
}

.status-indicator.error {
  background-color: var(--destructive);
}

.status-indicator.warning {
  background-color: var(--warning);
}

.status-indicator.idle {
  background-color: var(--muted-foreground);
}

/* Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  background-color: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  width: 500px;
  max-height: 80vh;
  overflow-y: auto;
}

.modal-header {
  padding: 20px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.modal-title {
  font-size: 18px;
  font-weight: 600;
}

.modal-close {
  background: none;
  border: none;
  color: var(--muted-foreground);
  cursor: pointer;
  font-size: 20px;
  padding: 4px;
}

.modal-body {
  padding: 20px;
}

.form-group {
  margin-bottom: 16px;
}

.form-label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 6px;
}

.form-input {
  width: 100%;
  padding: 8px 12px;
  background-color: var(--input);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--foreground);
  font-size: 14px;
}

.form-input:focus {
  outline: none;
  border-color: var(--ring);
  box-shadow: 0 0 0 2px rgba(212, 212, 216, 0.2);
}

.warning-banner {
  background-color: rgba(245, 158, 11, 0.1);
  border: 1px solid var(--warning);
  border-radius: var(--radius);
  padding: 12px;
  margin: 16px 20px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: var(--warning);
}

.hidden {
  display: none !important;
}

/* Drag and drop styles */
.canvas-area.drag-over {
  background-color: rgba(59, 130, 246, 0.05);
}

.tool-item.dragging {
  opacity: 0.5;
}

.canvas-node.dragging {
  opacity: 0.8;
  z-index: 100;
}

/* Responsive */
@media (max-width: 1200px) {
  .tools-panel {
    width: 240px;
  }

  .output-panel {
    width: 280px;
  }
}

@media (max-width: 900px) {
  .tools-panel {
    width: 200px;
  }

  .output-panel {
    width: 240px;
  }

  .canvas-node {
    width: 160px;
  }
}
/* Hidden alias IDs so old logic won't crash if it queries them */
.hidden { display: none !important; }
/* Minimal structure (adjust if your designer CSS already covers these) */
.tools-page { display: grid; grid-template-columns: 280px 1fr 420px; gap: 12px; height: calc(100vh - 120px); }
.tools-left, .tools-right { overflow: auto; }
.canvas-area { position: relative; height: 100%; background: var(--surface-1, #0b0d10); border-radius: 12px; }
.connections { position: absolute; inset: 0; pointer-events: none; }
.tools-actions { display: flex; justify-content: space-between; gap: .75rem; margin-top: .75rem; }
.logs__body { white-space: pre-wrap; overflow: auto; max-height: 32vh; }
.toast { position: fixed; bottom: 24px; right: 24px; padding: 10px 12px; border-radius: 8px; background: #111; color: #fff; }
.warning { background: #201; color: #f6a; padding: 8px 10px; border-radius: 8px; margin-bottom: 8px; }
/* Layout fallback to guarantee visible structure */
.tools-page {
  display: grid;
  grid-template-columns: 280px 1fr 360px;
  gap: 12px;
  padding: 12px;
  min-height: calc(100vh - 120px);
}
.tools-left, .tools-right { overflow: auto; }
.tools-canvas { display: flex; flex-direction: column; }
.canvas-area {
  position: relative;
  flex: 1 1 auto;
  min-height: 60vh;
  background: #0b0d10;
  border-radius: 12px;
}
.connections { position: absolute; inset: 0; pointer-events: none; }
.hidden { display: none !important; }
/* === Designer-style variables === */
:root {
  --bg-0:#050608;
  --bg-1:#0b0d10;
  --bg-2:#111418;
  --panel:#0f1318;
  --text:#e9edf3;
  --muted:#aab1bf;
  --border:rgba(255,255,255,.08);
  --accent:#12e6b7;
  --accent-2:#26d9ff;
  --ok:#52e3a5;
  --warn:#f6c177;
  --danger:#ff6b81;
  --shadow:0 10px 24px rgba(0,0,0,.35), inset 0 0 0 1px var(--border);
}

/* === Layout: 3 panes === */
.tools-page{
  display:grid;
  grid-template-columns:280px 1fr 360px;
  gap:16px;
  padding:16px 20px 12px;
  max-width:1600px;
  margin:0 auto;
  color:var(--text);
}
.tools-left,.tools-right{ overflow:auto; scrollbar-gutter: stable; }
.tools-left{ padding-right:4px; }
.tools-right{ padding-left:4px; }

.tools-canvas{ display:flex; flex-direction:column; min-height:70vh; }

/* === Left: catalog === */
.tools-left__header h2{ font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted); margin:0 0 10px; }
.tool-cat{ margin-bottom:18px; }
.tool-cat__title{ font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:#dbe7ff; margin:0 0 10px; }
.tool-cat__list{ display:flex; flex-direction:column; gap:8px; }

.tool-item{
  appearance:none; border:none; outline:none; cursor:grab;
  text-align:left; color:var(--text);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border:1px solid var(--border);
  border-radius:10px; padding:8px 10px;
  transition:transform .15s ease, box-shadow .2s ease, border-color .2s ease;
  box-shadow: var(--shadow);
}
.tool-item:hover{ transform:translateY(-1px); border-color:rgba(255,255,255,.18); }
.tool-item:active{ cursor:grabbing; transform:scale(.99); }
.tool-item__title{ font-weight:600; font-size:13px; }
.tool-item__meta{ display:flex; gap:8px; margin-top:4px; align-items:center; }
.badge{
  font-size:10px; padding:2px 6px; border-radius:999px;
  background:rgba(18,230,183,.1); color:#bff9e9; border:1px solid rgba(18,230,183,.25);
}
.muted{ color:var(--muted); font-size:11px; }

/* === Middle: canvas === */
.canvas-area{
  position:relative; flex:1 1 auto; border-radius:12px;
  background:radial-gradient(1200px 1200px at 50% -20%, rgba(18,230,183,.08), transparent 60%) , var(--bg-1);
  border:1px solid var(--border); box-shadow: var(--shadow);
  overflow:hidden;
}
/* subtle grid */
.canvas-area::before{
  content:""; position:absolute; inset:0;
  background-image:
    radial-gradient(rgba(255,255,255,.06) 1px, transparent 1px);
  background-size:20px 20px;
  pointer-events:none;
}

#connectionsSvg{
  position:absolute; inset:0; pointer-events:none;
}
#connectionsSvg path{
  stroke:var(--accent-2); stroke-width:2; opacity:.75; fill:none;
}

/* Node look (your engine can add classes) */
.node{
  position:absolute; min-width:160px; max-width:260px;
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--text); border-radius:12px; padding:10px 12px;
  box-shadow:0 12px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
  backdrop-filter: blur(4px);
}
.node-header{ font-weight:600; font-size:13px; margin-bottom:6px; }
.node-running{ border-color:#5ad2ff; box-shadow:0 0 0 2px rgba(38,217,255,.25), 0 10px 28px rgba(0,0,0,.5); }
.node-complete{ border-color:rgba(82,227,165,.7); box-shadow:0 0 0 2px rgba(82,227,165,.25), 0 10px 28px rgba(0,0,0,.5); }
.node-failed{ border-color:rgba(255,107,129,.7); box-shadow:0 0 0 2px rgba(255,107,129,.25), 0 10px 28px rgba(0,0,0,.5); }

/* === Bottom actions === */
.tools-actions{
  display:flex; justify-content:space-between; align-items:center; gap:.75rem;
  position:sticky; bottom:0; margin-top:12px; padding:10px 12px;
  background:linear-gradient(180deg, transparent, rgba(0,0,0,.35) 25%, rgba(0,0,0,.6));
  border-top:1px solid var(--border);
  backdrop-filter: blur(8px);
}
.btn{
  appearance:none; border:none; outline:none; cursor:pointer;
  padding:8px 12px; border-radius:10px; color:#071014; background:#e7eef4;
  font-weight:600; box-shadow: var(--shadow);
  transition:transform .12s ease, box-shadow .12s ease;
}
.btn:hover{ transform:translateY(-1px); }
.btn.primary{ background:var(--accent); }
.status{ color:var(--muted); margin-left:8px; }
.zoom{ color:#bfeaff; margin-left:10px; font-size:12px; }

/* === Right: results + logs === */
.results, .logs{
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border:1px solid var(--border); border-radius:12px; padding:10px; margin-bottom:12px;
  box-shadow: var(--shadow);
}
.results h3, .logs h3{ margin:0 0 8px; font-size:13px; letter-spacing:.06em; text-transform:uppercase; color:#dbe7ff; }
.results__body{ font-size:13px; color:var(--text); }
.logs__body{
  font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  white-space:pre-wrap; max-height:34vh; overflow:auto; color:#d8fffa;
}

/* === Toast & warning === */
.toast{
  position:fixed; bottom:24px; right:24px; padding:10px 12px;
  background:#0e1216; color:#fff; border:1px solid var(--border);
  border-radius:10px; box-shadow: var(--shadow);
}
.warning{ background:#2a0f13; border:1px solid rgba(255,107,129,.35); color:#ffd2d9; padding:8px 10px; border-radius:8px; margin-bottom:8px; }
.hidden{ display:none !important; }
.canvas-area { position: relative; }
#workflowBoxes { position: absolute; inset: 0; }
#connectionLayer { position: absolute; inset: 0; pointer-events: none; }
.hidden { display: none !important; }
.workflow-node { position: absolute; min-width: 180px; background: rgba(12,20,18,.25); border-radius: 10px; }
.workflow-node .box-content { padding: 10px 12px; }
.connection-handles .connection-handle {
  position: absolute; width: 10px; height: 10px; border-radius: 50%;
  background: var(--hack-green, #00d4b3); box-shadow: 0 0 8px rgba(0,212,179,.6);
  top: 50%; transform: translate(-50%,-50%);
}
.connection-handles .input  { left: 0; }
.connection-handles .output { right: 0; transform: translate(50%,-50%); }
svg#connectionLayer path { stroke: rgba(0,212,179,.6); stroke-width: 2; fill: none; }
svg#connectionLayer path.selected { stroke: #fff; }
/* Canvas layering so nodes are clickable */
#connectionLayer { pointer-events: none; z-index: 0; }
#workflowBoxes { position: relative; z-index: 1; }
#workflowBoxes .wf-node { pointer-events: auto; z-index: 2; }

/* Visual selection (optional but helpful while testing) */
.wf-node.selected { outline: 2px solid #12e3c3; box-shadow: 0 0 0 2px rgba(18,227,195,.25); }
