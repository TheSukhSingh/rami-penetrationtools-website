{% extends "main.html" %}

{% block title %}Tools Â· Hunter's Terminal{% endblock %}

{% block head_extra %}
  {# page-specific stylesheet living under the tools blueprint's static dir #}
  <link rel="stylesheet" href="{{ url_for('tools.static', filename='css/tools.css') }}">
{% endblock %}

{% block content %}
  <div class="app-container">
    <!-- Tools Panel -->
    <div class="tools-panel">
      <div class="tools-header">
        <h2>Tools</h2>
        <p>Drag tools to the canvas to build your workflow</p>
      </div>

      <div class="tools-list" id="toolsList">
        <!-- populated by script.js via /tools/api/tools -->
      </div>
    </div>

    <!-- Canvas Panel -->
    <div class="canvas-panel">
      <div class="canvas-toolbar">
        <button id="runBtn" class="btn primary">Run</button>
        <button id="saveBtn" class="btn">Save Preset</button>
        <button id="loadBtn" class="btn">Load Preset</button>
        <button id="globalConfigBtn" class="btn">Global Config</button>
      </div>

      <div id="warningBanner" class="warning-banner hidden">
        <span class="status-indicator warning"></span>
        <span id="warningText">Warning message will appear here</span>
      </div>

      <div class="canvas-area" id="canvasArea">
        <!-- connection overlay -->
        <svg id="connectionsSvg"
             class="connection-lines"
             style="position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:1;">
        </svg>
        <!-- nodes are absolutely positioned divs appended by script.js -->
      </div>
    </div>

    <!-- Output Panel -->
    <div class="output-panel">
      <div class="output-header">
        <h2>Output</h2>
        <p>Workflow execution results</p>
      </div>

      <div class="output-content">
        <div class="output-section">
          <h3>Status</h3>
          <div class="output-item">
            <span class="status-indicator idle"></span>
            Ready to run workflow
          </div>
        </div>

        <div class="output-section">
          <h3>Results</h3>
          <div id="outputResults">
            <div class="output-item">No results yet. Run your workflow to see output.</div>
          </div>
        </div>

        <div class="output-section">
          <h3>Logs</h3>
          <div id="outputLogs" class="output-log"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Config Modal -->
  <div id="configModal" class="modal hidden">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Tool Configuration</h2>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- populated by script.js -->
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script defer src="{{ url_for('tools.static', filename='js/tools-api.js') }}"></script>
  <script defer src="{{ url_for('tools.static', filename='js/script.js') }}"></script>
{% endblock %}
