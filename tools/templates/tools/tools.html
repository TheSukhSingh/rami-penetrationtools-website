{% extends "main.html" %}
{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('tools.static', filename='css/tools.css') }}">
{% endblock %}

{% block content %}
<div class="grid-bg"></div>
<div class="scan-lines"></div>

<section class="workspace workspace-layout">

  <!-- LEFT: TOOL LIBRARY -->
  <aside class="tool-library glass" id="toolLibrary">
    <div class="library-header">
      <h3>Tool Library</h3>
      <div class="search-box">
        <input id="toolSearch" type="text" placeholder="Search tools...">
        <!-- (icon purely decorative) -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.2-4.2M10.8 18.3a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </div>
    </div>

    <!-- Example categories; your backend can render real ones -->
<div class="tool-categories" id="toolCategories"></div>

  </aside>

  <!-- CENTER: CANVAS -->
  <main class="canvas-area">
<div class="canvas-header">
  <h2>Workflow</h2>
  <div class="canvas-stats" style="display:flex;align-items:center;gap:12px;">
    <span id="zoomPct">100%</span>
    <span id="chainBadge" class="badge badge-invalid" title="Chain validity">Invalid</span>
    <span id="chainReason" class="chain-reason"></span>
  </div>
</div>


    <div class="canvas-container">
      <div class="canvas pannable" id="canvas">
        <svg class="connection-layer" id="connectionLayer"></svg>
        <div class="canvas-content" id="canvasContent">
          <div class="workflow-boxes" id="workflowBoxes"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- RIGHT: TERMINAL -->
  <aside class="terminal-panel glass">
    <div class="terminal-header">
      <div class="terminal-controls">
        <div class="terminal-dot red"></div>
        <div class="terminal-dot yellow"></div>
        <div class="terminal-dot green"></div>
      </div>
      <div class="terminal-title">Console</div>
      <div class="terminal-status"><span class="status-dot"></span> idle</div>
    </div>
    <div class="terminal-content">
      <div class="terminal-output" id="terminalOutput"></div>
    </div>
  </aside>
</section>
<div id="toast" class="toast"></div>

{% endblock %}

{% block scripts_extra %}
<script src="{{ url_for('tools.static', filename='js/tools.js', v=range(1,999999)|random) }}"></script>
{% endblock %}
